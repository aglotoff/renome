mixin nav__list(data, level = 0)
    ul.nav__list&attributes(attributes)
        each item in data
            li.nav__item
                if item.submenu
                    a.nav__link(
                        href          = item.link
                        class         = {
                            nav__link_submenu : level > 0,
                            nav__link_active  : !!item.active,
                        }
                        role          = "button"
                        aria-haspopup = "true"
                        aria-controls = "submenu-" + item.text.toLowerCase()
                    )= item.text
                        button(
                            type        = "button"
                            aria-hidden = "true"
                            tabindex    = "-1"
                        ).nav__arrow.nav__arrow_open

                    .nav__submenu(id = "submenu-" + item.text.toLowerCase())
                        .nav__menu-inner
                            .nav__submenu-top
                                button.nav__arrow.nav__arrow_close Close submenu
                                .nav__submenu-top-text Back

                            +nav__list(item.submenu, level + 1)
                else
                    a.nav__link(
                        href=item.link
                        class={
                            nav__link_submenu: level > 0,
                            nav__link_active: !!item.active,
                        }
                    )= item.text

mixin nav(data)
    nav.nav&attributes(attributes)
        +hamburger('Toggle nav')(
            aria-haspopup = "true"
            aria-controls = "#main-menu"
        ).nav__toggle

        .nav__menu#main-menu
            .nav__menu-inner
                +mobile-search().nav__search
                +nav__list(data).nav__list_horizontal
    // /.nav
